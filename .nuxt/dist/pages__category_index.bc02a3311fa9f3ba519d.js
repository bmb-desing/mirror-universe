webpackJsonp([3],{F6BE:function(t,a,s){"use strict";var e=s("bOdI"),n=s.n(e),i=s("Dd8w"),r=s.n(i),o=s("QH/V"),c=s("NYxO");a.a=n()({name:"post",props:["post"],methods:r()({},Object(c.mapActions)({addVisit:"addVisit"}))},"methods",{dateForHumans:function(t){return Object(o.a)(t)}})},PT20:function(t,a,s){"use strict";var e=s("YFWx"),n=s("dRvh");a.a={name:"category",asyncData:function(t){var a=t.params,s=t.query,n=t.error,i=s.page||1;return e.a.get("/api/post/"+a.category+"?page="+i).then(function(t){return{posts:t.data.posts,count:t.data.count,category:t.data.cat}}).catch(function(t){n({statusCode:404,message:"Категория не найдена"})})},components:{Posts:n.a},head:function(){return{title:"Категория: "+this.category.title+" "+(this.$route.query.page&&1!=this.$route.query.page?". Страница "+this.$route.query.page:""),meta:[{hid:"description",name:"description",content:this.category.description},{breadcrumb:this.category.title}]}},data:function(){return{prevpage:null,nextpage:null,currentPage:null,pageNumbers:[],pageNumberCount:null}},mounted:function(){this.setPageNumbers()},methods:{setPages:function(t,a){this.pageNumbers=[],console.log(t),this.prevpage=t>1?t-1:null,this.nextpage=a?t<a?parseInt(t)+1:null:this.$route.query.page?parseInt(this.$route.query.page)+1:2;for(var s=0;s<7;s++){var e=t-4+s;e>=1&&e<=parseInt(this.count)&&(this.pageNumbers.push(e),this.pageNumberCount++)}},setPageNumbers:function(){var t=this.$route.query.page?this.$route.query.page:1;this.currentPage=t,this.setPages(t,this.count)},changePage:function(t){var a=this;e.a.get("/api/post/"+this.category.alias+"?page="+t).then(function(t){a.posts=t.data.posts}),this.setPageNumbers()}}}},aGNx:function(t,a,s){"use strict";var e={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"post"},t._l(t.posts,function(t){return s("posts",{key:t.id,attrs:{post:t}})})),s("nav",{staticClass:"paginator",attrs:{id:"pagination"}},[s("ul",{staticClass:"page-numbers"},[1!=t.currentPage?s("li",{staticClass:"first"},[s("nuxt-link",{attrs:{to:{name:"category",params:{category:t.category.alias},query:{page:"1"}},exact:""},nativeOn:{click:function(a){t.changePage(1)}}},[t._v("В начало")])],1):t._e(),t._l(this.pageNumbers,function(a){return null!=a?s("li",[a!=t.$route.query.page&&a!=t.currentPage?s("nuxt-link",{attrs:{to:{name:"category",params:{category:t.category.alias},query:{page:a}},exact:""},nativeOn:{click:function(s){t.changePage(a)}}},[t._v(t._s(a))]):s("span",[t._v(t._s(a))])],1):t._e()}),t.currentPage!=t.count?s("li",{staticClass:"last"},[s("nuxt-link",{attrs:{to:{name:"category",params:{category:t.category.alias},query:{page:t.count}},exact:""},nativeOn:{click:function(a){t.changePage(t.count)}}},[t._v("В конец")])],1):t._e()],2)])])},staticRenderFns:[]};a.a=e},bOdI:function(t,a,s){"use strict";a.__esModule=!0;var e,n=s("C4MV"),i=(e=n)&&e.__esModule?e:{default:e};a.default=function(t,a,s){return a in t?(0,i.default)(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}},dRvh:function(t,a,s){"use strict";var e=s("F6BE"),n=s("rwuM");var i=function(t){s("zW0D")},r=s("VU/8")(e.a,n.a,!1,i,null,null);a.a=r.exports},"iX+5":function(t,a,s){(t.exports=s("FZ+f")(!1)).push([t.i,"",""])},lDB6:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("PT20"),n=s("aGNx");var i=function(t){s("ryOm")},r=s("VU/8")(e.a,n.a,!1,i,null,null);a.default=r.exports},rwuM:function(t,a,s){"use strict";var e={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"post__item"},[s("div",{staticClass:"post__left"},[t.post.thumbnail?s("nuxt-link",{attrs:{to:"/"+t.post.cat.alias+"/"+t.post.alias},nativeOn:{click:function(a){t.addVisit(t.post.id)}}},[s("img",{attrs:{src:t.post.thumbnail,alt:t.post.title}})]):t._e()],1),s("div",{staticClass:"post__right"},[s("div",{staticClass:"post__category"},[s("nuxt-link",{attrs:{to:"/"+t.post.cat.alias}},[t._v(t._s(t.post.cat.title))])],1),s("h2",{staticClass:"post__title"},[s("nuxt-link",{attrs:{to:"/"+t.post.cat.alias+"/"+t.post.alias},nativeOn:{click:function(a){t.addVisit(t.post.id)}}},[t._v(t._s(t.post.title))])],1),s("div",{staticClass:"meta"},[s("div",{staticClass:"meta__item"},[s("span",{staticClass:"meta__bg meta__bg_visits"}),s("span",{staticClass:"meta__text"},[t._v(t._s(t.post.visits))])]),s("div",{staticClass:"meta__item"},[s("span",{staticClass:"meta__bg meta__bg_com"}),s("span",{staticClass:"meta__text"},[t._v(t._s(t.post.comments.length))])]),s("div",{staticClass:"meta__item"},[s("span",{staticClass:"meta__bg meta__bg_rating"}),s("span",{staticClass:"meta__text"},[t._v(t._s(0!=t.post.rating?(t.post.rating/t.post.ratingCount).toFixed(2):0)+" ("+t._s(t.post.ratingCount)+")")])]),s("div",{staticClass:"meta__item"},[s("span",{staticClass:"meta__bg meta__bg_time"}),s("span",{staticClass:"meta__text"},[t._v("\n                    "+t._s(t.dateForHumans(t.post.createdAt))+"\n                ")])])]),s("div",{staticClass:"post__text"},[t._v("\n\n            "+t._s(t.post.shortText)+"...\n        ")])])])},staticRenderFns:[]};a.a=e},ryOm:function(t,a,s){var e=s("zRu5");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s("rjj0")("76ba5217",e,!0,{sourceMap:!1})},zRu5:function(t,a,s){(t.exports=s("FZ+f")(!1)).push([t.i,"",""])},zW0D:function(t,a,s){var e=s("iX+5");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s("rjj0")("2a5ad964",e,!0,{sourceMap:!1})}});