webpackJsonp([1],{F6BE:function(t,s,a){"use strict";var e=a("bOdI"),n=a.n(e),i=a("Dd8w"),o=a.n(i),r=a("QH/V"),u=a("NYxO");s.a=n()({name:"post",props:["post"],methods:o()({},Object(u.mapActions)({addVisit:"addVisit"}))},"methods",{dateForHumans:function(t){return Object(r.a)(t)}})},X9lS:function(t,s,a){var e=a("wiqS");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("550c29bf",e,!0,{sourceMap:!1})},auBk:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("wofJ"),n=a("dfuA");var i=function(t){a("X9lS")},o=a("VU/8")(e.a,n.a,!1,i,null,null);s.default=o.exports},bOdI:function(t,s,a){"use strict";s.__esModule=!0;var e,n=a("C4MV"),i=(e=n)&&e.__esModule?e:{default:e};s.default=function(t,s,a){return s in t?(0,i.default)(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}},dRvh:function(t,s,a){"use strict";var e=a("F6BE"),n=a("rwuM");var i=function(t){a("zW0D")},o=a("VU/8")(e.a,n.a,!1,i,null,null);s.a=o.exports},dfuA:function(t,s,a){"use strict";var e={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"post"},t._l(t.posts,function(t){return a("posts",{key:t.id,attrs:{post:t}})})),a("nav",{staticClass:"paginator",attrs:{id:"pagination"}},[a("ul",{staticClass:"page-numbers"},[1!=t.currentPage?a("li",{staticClass:"first"},[a("nuxt-link",{attrs:{to:{path:"/posts",query:{page:"1"}},exact:""},nativeOn:{click:function(s){t.changePage(1)}}},[t._v("В начало")])],1):t._e(),t._l(this.pageNumbers,function(s){return null!=s?a("li",[s!=t.$route.query.page&&s!=t.currentPage?a("nuxt-link",{attrs:{to:{path:"/posts",query:{page:s}},exact:""},nativeOn:{click:function(a){t.changePage(s)}}},[t._v(t._s(s))]):a("span",[t._v(t._s(s))])],1):t._e()}),t.currentPage!=t.count?a("li",{staticClass:"last"},[a("nuxt-link",{attrs:{to:{path:"/posts",query:{page:t.count}},exact:""},nativeOn:{click:function(s){t.changePage(t.count)}}},[t._v("В конец")])],1):t._e()],2)])])},staticRenderFns:[]};s.a=e},"iX+5":function(t,s,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},rwuM:function(t,s,a){"use strict";var e={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"post__item"},[a("div",{staticClass:"post__left"},[t.post.thumbnail?a("nuxt-link",{attrs:{to:"/"+t.post.cat.alias+"/"+t.post.alias},nativeOn:{click:function(s){t.addVisit(t.post.id)}}},[a("img",{attrs:{src:t.post.thumbnail,alt:t.post.title}})]):t._e()],1),a("div",{staticClass:"post__right"},[a("div",{staticClass:"post__category"},[a("nuxt-link",{attrs:{to:"/"+t.post.cat.alias}},[t._v(t._s(t.post.cat.title))])],1),a("h2",{staticClass:"post__title"},[a("nuxt-link",{attrs:{to:"/"+t.post.cat.alias+"/"+t.post.alias},nativeOn:{click:function(s){t.addVisit(t.post.id)}}},[t._v(t._s(t.post.title))])],1),a("div",{staticClass:"meta"},[a("div",{staticClass:"meta__item"},[a("span",{staticClass:"meta__bg meta__bg_visits"}),a("span",{staticClass:"meta__text"},[t._v(t._s(t.post.visits))])]),a("div",{staticClass:"meta__item"},[a("span",{staticClass:"meta__bg meta__bg_com"}),a("span",{staticClass:"meta__text"},[t._v(t._s(t.post.comments.length))])]),a("div",{staticClass:"meta__item"},[a("span",{staticClass:"meta__bg meta__bg_rating"}),a("span",{staticClass:"meta__text"},[t._v(t._s(0!=t.post.rating?(t.post.rating/t.post.ratingCount).toFixed(2):0)+" ("+t._s(t.post.ratingCount)+")")])]),a("div",{staticClass:"meta__item"},[a("span",{staticClass:"meta__bg meta__bg_time"}),a("span",{staticClass:"meta__text"},[t._v("\n                    "+t._s(t.dateForHumans(t.post.createdAt))+"\n                ")])])]),a("div",{staticClass:"post__text"},[t._v("\n\n            "+t._s(t.post.shortText)+"...\n        ")])])])},staticRenderFns:[]};s.a=e},wiqS:function(t,s,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},wofJ:function(t,s,a){"use strict";var e=a("dRvh"),n=a("YFWx");s.a={components:{Posts:e.a},asyncData:function(t){var s=t.query,a=t.error,e=s.page||1;return n.a.get("/api/posts?page="+e).then(function(t){return{posts:t.data.posts,count:t.data.count}}).catch(function(t){a({statusCode:404,message:"Страница не найдена"})})},head:function(){return{title:this.$route.query.page&&1!=this.$route.query.page?"Статьи. Страница "+this.$route.query.page:"Статьи",meta:[{hid:"description",name:"description",content:"Страница всех записей"}]}},data:function(){return{prevpage:null,nextpage:null,currentPage:null,pageNumbers:[],pageNumberCount:null}},mounted:function(){this.setPageNumbers()},methods:{setPages:function(t,s){this.pageNumbers=[],console.log(t),this.prevpage=t>1?t-1:null,this.nextpage=s?t<s?parseInt(t)+1:null:this.$route.query.page?parseInt(this.$route.query.page)+1:2;for(var a=0;a<7;a++){var e=t-4+a;e>=1&&e<=parseInt(this.count)&&(this.pageNumbers.push(e),this.pageNumberCount++)}},setPageNumbers:function(){var t=this.$route.query.page?this.$route.query.page:1;this.currentPage=t,this.setPages(t,this.count)},changePage:function(t){var s=this;n.a.get("/api/posts?page="+t).then(function(t){s.posts=t.data.posts}),this.setPageNumbers()}}}},zW0D:function(t,s,a){var e=a("iX+5");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("2a5ad964",e,!0,{sourceMap:!1})}});